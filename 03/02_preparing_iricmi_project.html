<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Preparing iricmi_project.xml &mdash; iRIC-MI Documentation 1.0.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to develop models" href="../04_how_to_develop_models.html" />
    <link rel="prev" title="Overview" href="01_overview.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            iRIC-MI Documentation
          </a>
              <div class="version">
                1.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01_intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_install.html">How to Install iRIC-MI</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../03_how_to_run.html">How to run models</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01_overview.html">Overview</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Preparing iricmi_project.xml</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#defining-model-element">Defining &lt;Model /&gt; element</a></li>
<li class="toctree-l3"><a class="reference internal" href="#defining-connection-element">Defining &lt;Connection /&gt; element</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#notice-about-making-connections">Notice about making connections</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../04_how_to_develop_models.html">How to develop models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_how_iricmi_works.html">How iRIC-MI works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06_iricmi_gui.html">iRIC-MI GUI User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07_iricmilib_ref.html">iRIC-MI library Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08_sample_models.html">Sample models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09_iricmi_pymt_util.html">iricmi_pymt_util</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10_future_works.html">Future works</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">iRIC-MI Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../03_how_to_run.html">How to run models</a></li>
      <li class="breadcrumb-item active">Preparing iricmi_project.xml</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/03/02_preparing_iricmi_project.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="preparing-iricmi-project-xml">
<span id="sec-preparing-iricmi-project"></span><h1><a class="toc-backref" href="#id5" role="doc-backlink">Preparing iricmi_project.xml</a><a class="headerlink" href="#preparing-iricmi-project-xml" title="Permalink to this heading"></a></h1>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#preparing-iricmi-project-xml" id="id5">Preparing iricmi_project.xml</a></p>
<ul>
<li><p><a class="reference internal" href="#defining-model-element" id="id6">Defining &lt;Model /&gt; element</a></p></li>
<li><p><a class="reference internal" href="#defining-connection-element" id="id7">Defining &lt;Connection /&gt; element</a></p>
<ul>
<li><p><a class="reference internal" href="#notice-about-making-connections" id="id8">Notice about making connections</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<p>As explained in <a class="reference internal" href="01_overview.html#sec-how-to-run-overview-iricmi-project"><span class="std std-ref">Preparing iricmi_project.xml</span></a>,
when users want to run models in “coupled” mode, they need to prepare
iricmi_project.xml.</p>
<p>Now, iRIC-MI GUI can be launched from iRIC GUI, and that can be used to prepare iricmi_project.xml</p>
<p>In this page, the steps to create iricmi_project.xml by hand is described, so that you can understand the
meanings of the settings in iricmi_project.xml.</p>
<p><a class="reference internal" href="#prepare-iricmi-project-example"><span class="std std-numref">Listing 8</span></a> shows an example of iricmi_project.xml.</p>
<p>As you see, it contains &lt;Model /&gt; elements and &lt;Connection /&gt; elements.</p>
<div class="literal-block-wrapper docutils container" id="prepare-iricmi-project-example">
<div class="code-block-caption"><span class="caption-number">Listing 8 </span><span class="caption-text">Example of iricmi_project.xml</span><a class="headerlink" href="#prepare-iricmi-project-example" title="Permalink to this code"></a></div>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nt">&lt;iRICMIProject&gt;</span>
<span class="linenos"> 2</span><span class="w">  </span><span class="nt">&lt;Models&gt;</span>
<span class="linenos"> 3</span><span class="w">    </span><span class="nt">&lt;Model</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;global_send_c++&quot;</span><span class="w"> </span><span class="na">nodes=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="linenos"> 4</span><span class="w">    </span><span class="nt">&lt;Model</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;global_receive_c++&quot;</span><span class="w"> </span><span class="na">nodes=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="linenos"> 5</span><span class="w">  </span><span class="nt">&lt;/Models&gt;</span>
<span class="linenos"> 6</span><span class="w">  </span><span class="nt">&lt;Connections&gt;</span>
<span class="linenos"> 7</span><span class="w">    </span><span class="nt">&lt;Connection&gt;</span>
<span class="linenos"> 8</span><span class="w">      </span><span class="nt">&lt;From</span><span class="w"> </span><span class="na">model=</span><span class="s">&quot;global_send_c++&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;global&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;discharge&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="linenos"> 9</span><span class="w">      </span><span class="nt">&lt;To</span><span class="w"> </span><span class="na">model=</span><span class="s">&quot;global_receive_c++&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;calculationCondition&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;discharge&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="linenos">10</span><span class="w">    </span><span class="nt">&lt;/Connection&gt;</span>
<span class="linenos">11</span><span class="w">  </span><span class="nt">&lt;/Connections&gt;</span>
<span class="linenos">12</span><span class="nt">&lt;/iRICMIProject&gt;</span>
</pre></div>
</div>
</div>
<p>The detail about preparing the elements is described below.</p>
<section id="defining-model-element">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Defining &lt;Model /&gt; element</a><a class="headerlink" href="#defining-model-element" title="Permalink to this heading"></a></h2>
<p>&lt;Model /&gt; element describes the subfolders that contain the data for the models.
The attributes of &lt;Model /&gt; element is shown in <a class="reference internal" href="#table-attributes-of-model-element"><span class="std std-numref">Table 1</span></a>.</p>
<span id="table-attributes-of-model-element"></span><table class="docutils align-default" id="id1">
<caption><span class="caption-number">Table 1 </span><span class="caption-text">The attributes of &lt;Model /&gt; element</span><a class="headerlink" href="#id1" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>The name of subfolder that contains the input data of the model</p></td>
</tr>
<tr class="row-odd"><td><p>nodes</p></td>
<td><p>Not used now. Please specify 1 always.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With the example above, the names of subfolders are identical to the names of models.
But actually, the names of subfolders are arbitrary.</p>
<p>It can be “fastmech1”, “fastmech2”, .., or “xxx_river”, “yyy_river”, for example.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>“nodes” attribute is for future use, in case iRIC-MI will support parallelizion of models using MPI.
In that case, “nodes” should be the number of nodes (in other words “processes”) for that model.</p>
</div>
</section>
<section id="defining-connection-element">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Defining &lt;Connection /&gt; element</a><a class="headerlink" href="#defining-connection-element" title="Permalink to this heading"></a></h2>
<p>&lt;Connection /&gt; element describes how the time dependent data is exchanged between the models.</p>
<p>As shown in <a class="reference internal" href="#prepare-iricmi-project-example"><span class="std std-numref">Listing 8</span></a>, &lt;Connection /&gt; element contains &lt;From /&gt;
element and &lt;To /&gt; element.</p>
<p><a class="reference internal" href="#table-from-to-attributes"><span class="std std-numref">Table 2</span></a> shows the attributes of &lt;From /&gt; and &lt;To /&gt; elemennts.</p>
<span id="table-from-to-attributes"></span><table class="docutils align-default" id="id2">
<caption><span class="caption-number">Table 2 </span><span class="caption-text">The attributes of &lt;From /&gt; and &lt;To /&gt; elements</span><a class="headerlink" href="#id2" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>model</p></td>
<td><p>The name of model. It should be equal to one of the “name” attribute of &lt;Model /&gt; elements.</p></td>
</tr>
<tr class="row-odd"><td><p>type</p></td>
<td><p>The type of data to connect. Please refer to <a class="reference internal" href="#table-types-connection-from"><span class="std std-numref">Table 3</span></a> and <a class="reference internal" href="#table-types-connection-to"><span class="std std-numref">Table 4</span></a> for the values to specify.</p></td>
</tr>
<tr class="row-even"><td><p>name</p></td>
<td><p>The name of the data.</p></td>
</tr>
<tr class="row-odd"><td><p>typeName</p></td>
<td><p>(Optional) The type name of boundary condition or complex type grid attribute.</p></td>
</tr>
<tr class="row-even"><td><p>index</p></td>
<td><p>(Optional) The index of boundary condition or complex type grid attribute. It starts from 1, not 0.</p></td>
</tr>
</tbody>
</table>
<span id="table-types-connection-from"></span><table class="docutils align-default" id="id3">
<caption><span class="caption-number">Table 3 </span><span class="caption-text">The type values for &lt;From /&gt; elements</span><a class="headerlink" href="#id3" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>global</p></td>
<td><p>Global output</p></td>
</tr>
<tr class="row-odd"><td><p>boundaryCondition</p></td>
<td><p>Boundary condition</p></td>
</tr>
<tr class="row-even"><td><p>complexAttribute</p></td>
<td><p>Complex type grid attribute</p></td>
</tr>
<tr class="row-odd"><td><p>gridAttribute</p></td>
<td><p>Attribute defined at grid nodes or cells</p></td>
</tr>
</tbody>
</table>
<span id="table-types-connection-to"></span><table class="docutils align-default" id="id4">
<caption><span class="caption-number">Table 4 </span><span class="caption-text">The type values for &lt;To /&gt; elements</span><a class="headerlink" href="#id4" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>calculationCondition</p></td>
<td><p>Calculation condition</p></td>
</tr>
<tr class="row-odd"><td><p>boundaryCondition</p></td>
<td><p>Boundary condition</p></td>
</tr>
<tr class="row-even"><td><p>complexAttribute</p></td>
<td><p>Complex type grid attribute</p></td>
</tr>
<tr class="row-odd"><td><p>gridAttribute</p></td>
<td><p>Attribute defined at grid nodes or cells</p></td>
</tr>
</tbody>
</table>
<p>When you want to write &lt;Connection /&gt; element in iricmi_project.xml, you need to
work on the steps below:</p>
<ol class="arabic simple">
<li><p>Reads the project.xml in the subfolder, to know the model used to run the project in it. You can know the model, by checking “solverName” and “solverVersion” attributes of &lt;iRICProject /&gt; element.</p></li>
<li><p>Check the subfolders in “solvers” folder in the path that environmental variable “IRICMI_ROOT_PATH” refers, and find the folder that contains the model you’ve itentified in step 1. You can identify by checking “name” and “version” attributes of &lt;SolverDefinition /&gt; element.</p></li>
<li><p>Reads the definition.xml that you’ve identified in step 2. and checks the value of “name” attribute of &lt;Item /&gt; element that you want to connect. For boundary condition and complex type grid attribute, you also needs to check the value of “type”, and specify them as typeName” attributes in &lt;From /&gt; element or &lt;To/&gt; element.</p></li>
<li><p>In case of boundary condition and complex type grid attribute, you also needs to check the value of “index”. You can know the value to specify, by opening the project with iRIC GUI. The index values are specified as 1, 2, 3, …, from top to bottom.</p></li>
</ol>
<p>Please refer to <a class="reference internal" href="../04/02_creating_solver_def.html#sec-creating-definition-xml"><span class="std std-ref">Creating “definition.xml”</span></a> and for the examples of the definitions of time dependent input and output in definition.xml.</p>
<section id="notice-about-making-connections">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Notice about making connections</a><a class="headerlink" href="#notice-about-making-connections" title="Permalink to this heading"></a></h3>
<p>Inputs and outputs can be categorized to two groups:</p>
<ul class="simple">
<li><p>Scalar value: Global, Boundary Condition, Complex type grid attribute</p></li>
<li><p>Grid attribute values defined at nodes or cells</p></li>
</ul>
<p>Please note that connections can be made between an input and an output in the same group.
For example, it is not possible to make a connection between global output and grid attribute input.</p>
<p>For scalar values, the values are just copied from output to input.</p>
<p>For grid attribute values, when the grid shapes are just the same, values are copied.
When grid shapes are different, interpolation is executed.</p>
<p>Please refer to <a class="reference internal" href="../05/03_mapping.html#sec-mapping-grid-attribute"><span class="std std-ref">Mapping grid attributes values</span></a> for detail.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="01_overview.html" class="btn btn-neutral float-left" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../04_how_to_develop_models.html" class="btn btn-neutral float-right" title="How to develop models" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, iRIC organization.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>